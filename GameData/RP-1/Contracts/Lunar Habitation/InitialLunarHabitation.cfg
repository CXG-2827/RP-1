CONTRACT_TYPE
{
	name = crewedLunar14
	title = Crewed 14-Day Lunar Mission
	group = Development

	description = <b>Program: Crewed Lunar Habitation</b><br><br>Previous crewed lunar mission requirements were short in duration, no more than a few days.  Much longer stays will be required in order to one day place a permanent installation on the Moon.  This mission will conduct the first long-duration planetary habitat experiment to validate the technology for further afar crewed exploration in the future.<br><br>This mission can be completed in numerous ways.  Whether Apollo-style with a Lunar Orbit Rendezvous, as a Lunar Direct mission with no orbiter, or by sending a separate presupply mission ahead of your crew, the choice is yours.  However, follow-on missions will require longer stays and larger crews, so plan accordingly.  A separate pre-supply mission is available should you choose to use that mission profile.

	synopsis = Land a crew on the Moon, stay for 14 days, then return them safely to Earth

	completedMessage = Congratulations! You have completed the first step to a lasting crewed presence on the Moon. 

	cancellable = true
	declinable = false
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 1
	maxSimultaneous = 1
	deadline = 0

	targetBody = Moon


	// ************ REWARDS ************
	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardFunds = 0
	failureFunds = 0
	rewardReputation = 1500	// was 400
	failureReputation = 0 // was @rewardReputation	// was 400



	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = LunarHabitation
	}

	PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		title = Extended Duration Moon Landing
		define = ExtendedMoonLanding
	
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = Launch a new vessel
			hideChildren = true
		}
		PARAMETER
		{
			name = TwoCrew
			type = HasCrew
			minCrew = 3
			maxCrew = 99
			title = Have at least 3 crew on board
			hideChildren = true
		}

		PARAMETER
		{
			name = LandCrewed
			type = All
			title = Land the crewed lander
			disableOnStateChange = true
			
			PARAMETER
			{
				name = TwoCrew
				type = HasCrew
				minCrew = 2
				maxCrew = 99
				title = Land with at least 2 crew
				hideChildren = true
			}

			PARAMETER
			{
				name = OrbitWrapper
				title = Stay on the Moon for the specified duration
				type = All
				disableOnStateChange = true
				completeInSequence = true

				PARAMETER
				{
					name = LandOnMoon
					type = ReachState
					targetBody = Moon
					situation = LANDED
				}

				PARAMETER
				{
					name = Duration
					type = Duration
					duration = 14d
					preWaitText = Land on the moon
					WaitingText = Exploring...
					completionText = Exploration complete, you may return to Earth when ready.
				}
			}
		}
		PARAMETER
		{
			name = ReturnHome
			type = RP1ReturnHome
			title = Return home safely
			hideChildren = true
			completeInSequence = true
		}
	}
}

CONTRACT_TYPE
{
	name = crewedLunar30
	title = Crewed 30-Day Lunar Mission
	group = Development

	description = <b>Program: Crewed Lunar Habitation</b><br><br>With a 14-day crewed Lunar mission now complete, it's time to extend the time a crew spends on the moon.  Send at least 2 crew to the Moon for 30 days.  Previously landed infrastructure can be used, and a resupply mission can be sent if your mission profile requires it. 

	synopsis = Land a crew on the Moon, stay for 30 days, then return them safely to Earth

	completedMessage = Congratulations! You have completed the first step to a lasting crewed presence on the Moon. 

	cancellable = true
	declinable = false
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 1
	maxSimultaneous = 1
	deadline = 0

	targetBody = Moon


	// ************ REWARDS ************
	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardFunds = 0
	failureFunds = 0
	rewardReputation = 1500	// was 400
	failureReputation = 0 // was @rewardReputation	// was 400



	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = LunarHabitation
	}

	PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		title = Extended Duration Moon Landing
		define = ExtendedMoonLanding
	
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = Launch a new vessel
			hideChildren = true
		}
		PARAMETER
		{
			name = TwoCrew
			type = HasCrew
			minCrew = 2
			maxCrew = 99
			title = Have at least 2 crew on board
			hideChildren = true
		}

		PARAMETER
		{
			name = LandCrewed
			type = All
			title = Land the crewed lander
			disableOnStateChange = true
			
			PARAMETER
			{
				name = TwoCrew
				type = HasCrew
				minCrew = 2
				maxCrew = 99
				title = Land with at least 2 crew
				hideChildren = true
			}

			PARAMETER
			{
				name = OrbitWrapper
				title = Stay on the Moon for the specified duration
				type = All
				disableOnStateChange = true
				completeInSequence = true

				PARAMETER
				{
					name = LandOnMoon
					type = ReachState
					targetBody = Moon
					situation = LANDED
				}

				PARAMETER
				{
					name = Duration
					type = Duration
					duration = 30d
					preWaitText = Land on the moon
					WaitingText = Exploring...
					completionText = Exploration complete, you may return to Earth when ready.
				}
			}
		}

		PARAMETER
		{
			name = ReturnHome
			type = RP1ReturnHome
			title = Return home safely
			hideChildren = true
			completeInSequence = true
		}
	}
}

CONTRACT_TYPE
{
	name = LunarPresupply
	title = Presupply Mission for Crewed Lunar Habitation
	group = Development

	description = <b>Program: Crewed Lunar Habitation</b><br><br>Crewed Lunar Habitation mission design may dictate sending supplies and habitation modules separate from the crew.  These missions will sustain a longer-duration Lunar presence as procedures and technology are developed for crewed missions beyond the Moon.  <br><br><b>Number of Contracts Completed: @index / @maxCompletions</b>
	
	genericDescription = Launch an uncrewed supply vessel to the Moon to provide resources for a crewed mission.

	synopsis = Land a supply craft on the Moon.

	completedMessage = Congratulations, our crewed mission will now have supplies for their extended exploration mission.

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 3
	maxSimultaneous = 1
	deadline = 0

	targetBody = Moon

	// ************ REWARDS ************ 
	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardFunds = 0
	failureFunds = 0
	rewardReputation = 250
	failureReputation = 0 



	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = LunarHabitation
	}

	REQUIREMENT
	{
		ALL
		{
			name = CompleteContract
			type = CompleteContract
			contractType = crewedLunar14
			invertRequirement = true
			hidden = true
		}
		{
			name = CompleteContract
			type = CompleteContract
			contractType = crewedLunar30
			invertRequirement = true
			hidden = true
		}

	REQUIREMENT
	{
		ANY		
		{
			name = AcceptContract
			type = AcceptContract
			contractType = crewedLunar14
		}
		{
			name = AcceptContract
			type = AcceptContract
			contractType = crewedLunar30
		}
		{
			name = AcceptContract
			type = AcceptContract
			contractType = crewedLunar60
		}

	DATA
	{
		type = int
		index = $RepeatMoonSupply_Count + 0
	}

	BEHAVIOUR
	{
		name = IncrementTheCount
		type = Expression
		
		CONTRACT_COMPLETED_SUCCESS
		{
			RepeatMoonSupply_Count = $RepeatMoonSupply_Count + 1
		}
	}

	// ************ PARAMETERS ************
	
	PARAMETER
	{
		name = vesselGroup
		type = VesselParameterGroup
		title = Uncrewed Presupply Mission 
		define = LunarPressupply
		defineList = LunarSupply
		disableOnStateChange = true

		PARAMETER
		{
			name = NoCrew
			type = HasCrew
			minCrew = 0
			maxCrew = 0
			title = Uncrewed
			hideChildren = true
		}

		PARAMETER
		{
			name = LandUncrewed
			type = All
			title = Land the uncrewed lander
			disableOnStateChange = true

			PARAMETER
			{

				name = ReachState
				type = ReachState
				targetBody = Moon
				situation = LANDED

			}
		}
	}
}
