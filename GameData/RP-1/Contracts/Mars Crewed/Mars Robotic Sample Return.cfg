CONTRACT_TYPE
{
	name = MarsRoboticSampleReturn
	title = Mars Robotic Sample Return
	group = CrewedMarsExp
	agent = Federation Aeronautique Internationale

	description = <b>Program: Crewed Mars Exploration<br>Type: <color=blue>Optional</color></b><br><br>Design and successfully launch an uncrewed probe to land on Mars, gather surface samples, and return to the crewed craft to dock in orbit for sample retrieval. Return the samples with the crew to Earth.

	synopsis = Send an uncrewed craft to land on Mars and return the surface samples to Earth.

	completedMessage = Congratulations! Our scientists can learn a lot more about the make-up of the planet by studying the physical samples that you have returned.

	sortKey = 1400

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 1
	maxSimultaneous = 1
	deadline = 0

	targetBody = Mars



	prestige = Significant   // 1.25x
	advanceFunds = 0
	rewardScience = 0
	rewardReputation = 1200
	rewardFunds = 0
	failureReputation = 0
	failureFunds = 0

	// ************ REQUIREMENTS ************

REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = CrewedMarsExp
	}

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = CollectCrewedMarsSurfaceScience
		invertRequirement = true
	}
	
	REQUIREMENT
	{
		name = AcceptContract
		type = AcceptContract
		contractType = CollectCrewedMarsSurfaceScience
		invertRequirement = true
	}

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = FirstCrewedMarsLanding
		invertRequirement = true
	}
	
	REQUIREMENT
	{
		name = AcceptContract
		type = AcceptContract
		contractType = FirstCrewedMarsLanding
		invertRequirement = true
	}

	// ************ PARAMETERS ************

	PARAMETER
	{
		name = vesselGroupLaunch
		type = VesselParameterGroup
		title = Control a Crew Transfer Vechicle with the required parameters
		notes = The ship must include at least 1 Docking Port and support for at least 4 Crew
		disableOnStateChange = true
		
		PARAMETER
		{
			name = HasCapacity
			type = HasCrewCapacity
			minCapacity = 4
			title = Space for at least 4 crew
			hideChildren = true
			disableOnStateChange = false
		}
		PARAMETER
		{
			name = DockingPort
			type = PartValidation
			partModule = ModuleDockingNode
			minCount = 1
			title = Have at least 1 docking port
			hideChildren = true
		}
	
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = 200000
			maxApA = 600000
			targetBody = Mars
			title = Reach orbit with a perigee greater than 200 km and an apogee less than 600 km
			hideChildren = true
		}
	}
	PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		title = Mars Robotic Sample Return
		define = MarsRoboticSampleReturn
		completeInSequence = true
		resetChildrenWhenVesselDestroyed = true

		PARAMETER
		{
			name = Crewmembers
			type = HasCrew
			minCrew = 0
			maxCrew = 0
			title = Uncrewed
			hideChildren = true
		}
		PARAMETER
		{
			name = Landing
			type = ReachState
			situation = LANDED
			situation = SPLASHED
			disableOnStateChange = true
			title = Safely Land on Mars
			hideChildren = true
		}

				PARAMETER
		{
			name = DockingPort
			type = PartValidation
			partModule = ModuleDockingNode
			minCount = 1
			title = Have at least 1 docking port
			hideChildren = true
		}
		PARAMETER
		{
			name = Rendezvous
			type = Rendezvous
			vessel = CrewedMarsShip
			distance = 100
			title = Rendezvous with the station.
		}
		PARAMETER
		{
			name = Docking
			type = Docking
			vessel = CrewedMarsShip
			completeInSequence = true
			title = Dock with the ship, and transfer samples.
		}

		PARAMETER
		{
			name = ReturnHome
			type = RP1ReturnHome
			title = Return to Earth Safely with the Samples
			hideChildren = true
			completeInSequence = true
		}
	}
	PARAMETER
	{
		name = SurfaceScience
		type = CollectScience
		situation = SrfLanded
		situation = SrfSplashed
		recoveryMethod = Recover
		title = Gather Science while Landed and <b><color=white>Return it home, DO NOT TRANSMIT</color></b>
		hideChildren = true
	}
}
